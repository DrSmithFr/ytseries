<section class="page page_divided">

  <div class="sidebar" *ngIf="displayFilterMenu">
    <div class="sidebar_item back-button">
      <button mat-raised-button class="centered-btn clear-filter-btn" (click)="toogleFilterMenu()">Fermer le Menu</button>
    </div>

    <button
      *ngIf="hasActiveFilters()"
      mat-flat-button
      class="clear-filter-btn"
      (click)="clearActiveFilters()">
      Supprimer les filtres
    </button>

    <div class="filter-container">
      <h1>Filtres</h1>
      <mat-divider></mat-divider>

      <div *ngIf="filters['locales'].length">
        <h2>Locale</h2>
        <mat-radio-group class="example-radio-group" [(ngModel)]="activeFilters.locale" (change)="onFiltersChange()">
          <mat-radio-button
            class="example-radio-button"
            *ngFor="let locale of filters.locales"
            [value]="locale.key">
            <span class="flag-icon flag-icon-{{locale.key}}"></span> ({{locale.doc_count}})
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <div *ngIf="filters['types'].length">
        <h2>Type</h2>
        <mat-radio-group class="example-radio-group" [(ngModel)]="activeFilters.type" (change)="onFiltersChange()">
          <mat-radio-button
            class="example-radio-button"
            *ngFor="let type of filters.types"
            [value]="type.key">
            {{type.key}} ({{type.doc_count}})
          </mat-radio-button>
        </mat-radio-group>
      </div>

      <div *ngIf="filters['categories'].length">
        <h2>Genre</h2>
        <mat-radio-group class="example-radio-group" [(ngModel)]="activeFilters.categories" (change)="onFiltersChange()">
          <mat-radio-button
            class="example-radio-button"
            *ngFor="let type of filters.categories"
            [value]="type.key">
            {{type.key}} ({{type.doc_count}})
          </mat-radio-button>
        </mat-radio-group>
      </div>
    </div>

  </div>

  <div class="page_body" [ngClass]="{'blurry': displayFilterMenu}">

    <div class="search-bar">
      <button class="search-filter" mat-flat-button (click)="toogleFilterMenu()">
        <i class="material-icons">filter_list</i>
      </button>
      <input class="search-input" type="text" (keyup)="makeSearch()" [(ngModel)]="query">
      <button class="search-button" mat-flat-button color="primary">
        <i class="material-icons">search</i>
      </button>
    </div>

    <mat-divider></mat-divider>

    <app-quick-view-list [series]="result"></app-quick-view-list>
  </div>

  <app-navigation-mobile (searching)="updateQuery($event)"></app-navigation-mobile>

</section>
